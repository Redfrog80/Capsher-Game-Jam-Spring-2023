print("yeet")

import pygame
import os

# Initialize Pygame
pygame.init()

clock = pygame.time.Clock()
fps = 60

# Set up the display
screen_width = 640
screen_height = 480
screen = pygame.display.set_mode((screen_width, screen_height))
pygame.display.set_caption("Target Practice")

# Load the target image
target_image = pygame.image.load(os.path.join('images', 'gameImage.png'))

# Set up the bot
bot_image = pygame.image.load(os.path.join('images', 'amogus.png'))

player_x = 0 # initializes player location
player_y = 0

initial_x = 100
initial_y = 100 # change these as needed, when bots spawn this should be random

bot_speed_x = 0
bot_speed_y = 0

bot_accel_x = 1
bot_accel_y = 1 # this is a coefficient

max_speed_x = 10
max_speed_y = 7

bot_x = screen_width / 2 + initial_x
bot_y = screen_height / 2 + initial_y

speed_multiplier = 1 # changes overall speed of the bot after acceleration
damp_factor = 0.1 # changes how quickly a bot slows down when not actively moving in any given axis


# Main game loop
running = True
while running:
    # Handle events
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
            
    player_x, player_y = pygame.mouse.get_pos() # makes bot follow mouse
    dir_x = player_x - bot_x
    dir_y = player_y - bot_y # make a vector from the bot to the player
    
    
    dir_length = max(1, math.sqrt(dir_x ** 2 + dir_y ** 2))
    dir_x /= dir_length
    dir_y /= dir_length # normalizes vector

    keys = pygame.key.get_pressed() # movement
    if keys[pygame.K_LEFT]: #if dir_x < 0:
        bot_speed_x -= bot_accel_x
        if bot_speed_x < -max_speed_x:
            bot_speed_x = -max_speed_x
    elif keys[pygame.K_RIGHT]: #if dir_x > 0:
        bot_speed_x += bot_accel_x
        if bot_speed_x > max_speed_x:
            bot_speed_x = max_speed_x
    else:
        if bot_speed_x > 0:
            bot_speed_x -= bot_accel_x * damp_factor
        elif bot_speed_x < 0:
            bot_speed_x += bot_accel_x * damp_factor

    if keys[pygame.K_UP]: #if dir_y < 0:
        bot_speed_y -= bot_accel_y
        if bot_speed_y < -max_speed_y:
            bot_speed_y = -max_speed_y
    elif keys[pygame.K_DOWN]: #if dir_y < 0:
        bot_speed_y += bot_accel_y
        if bot_speed_y > max_speed_y:
            bot_speed_y = max_speed_y
    else:
        if bot_speed_y > 0:
            bot_speed_y -= bot_accel_y * damp_factor
        elif bot_speed_y < 0:
            bot_speed_y += bot_accel_y * damp_factor

    # Move the bot
    bot_x += bot_speed_x * speed_multiplier
    bot_y += bot_speed_y * speed_multiplier

    # Draw the screen
    screen.fill((255, 255, 255))
    screen.blit(target_image, (screen_width / 2 - target_image.get_width() / 2, screen_height / 2 - target_image.get_height() / 2))
    screen.blit(bot_image, (bot_x - bot_image.get_width() / 2, bot_y - bot_image.get_height() / 2))
    pygame.display.flip()
    
    clock.tick(fps) # limit FPS

# Clean up Pygame
pygame.quit()